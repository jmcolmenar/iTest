<!DOCTYPE html>
<html ng-app="retrievepass" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" content="text/html" http-equiv="content-Type"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>iTest</title>

    <!-- Add Fav Icon-->
    <link rel="icon" href="/img/favicon.ico"/>

    <!-- Add Bootstrap -->
    <link rel="stylesheet" href="/css/lib/bootstrap.min.css"/>

    <!-- Custom CSS and adaptive style-->
    <link rel="stylesheet" href="/css/retrieve-pass-style.css"/>

    <!-- Add AngularJS and additionals libraries-->
    <script src="/angularjs/lib/angular.min.js"></script>

    <!-- Add AngularJS App -->
    <script src="/angularjs/retrieve_pass_app.js"></script>

    <!-- Include jQuery and javascript Boostrap library (necessary for Bootstrap) -->
    <script src="/js/lib/jquery-3.1.1.min.js"></script>
    <script src="/js/lib/bootstrap.min.js"></script>

</head>
<body ng-controller="mainCtrl">

<!-- HEADER -->
<header>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="/">
                    <img src="/img/logoitest-inverse.png" alt="Go to home page"/>
                </a>
            </div>
        </div>
    </nav>
</header>
<!-- HEADER -->

<!-- RETRIEVE PASSWORD FORM -->
<div class="container" id="main-container">
    <div class="main-div">
        <div class="main-title-div">
            <h2 th:text="#{changePassword.title}"></h2>
        </div>
        <br/>
        <div class="container">
            <div class="col-xs-12 col-sm-8 col-sm-offset-2">
                <form class="form-horizontal" role="form" ng-submit="changeNewPassword()">

                    <div class="form-group">
                        <label for="newpass" th:text="#{changePassword.newPassword}"></label>
                        <input type="text" style="display:none;"/> <!-- To avoid shows the dialog for save the password in the browser -->
                        <input type="password" class="form-control" id="newpass" ng-model="changePasswordData.newPass" maxlength="32"/>
                    </div>

                    <div class="form-group">
                        <label for="repeatpass" th:text="#{changePassword.repeatPassword}"></label>
                        <input type="text" style="display:none;"/> <!-- To avoid shows the dialog for save the password in the browser -->
                        <input type="password" class="form-control" id="repeatpass" ng-model="changePasswordData.repeatPass" maxlength="32"/>
                    </div>

                    <div class="form-group" style="text-align:center;">
                        <button type="submit" class="btn btn-primary" th:text="#{changePassword.button}"></button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- RETRIEVE PASSWORD FORM -->


<!-- Modal with error message -->
<div class="modal fade" id="errordModal" role="dialog">
    <div class="modal-dialog modal-sm">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <h2><span class="glyphicon glyphicon-exclamation-sign"></span></h2>
                <p ng-if="errorType == 'serverError'">{{serverError}}</p>
                <p ng-if="errorType == 'emptyFields'" th:text="#{changePassword.emptyFieldsError}"></p>
                <p ng-if="errorType == 'error'" th:text="#{changePassword.errorChangingPassword}"></p>
            </div>
            <div class="modal-footer-custom">
                <button type="button" class="btn btn-primary" data-dismiss="modal" th:text="#{modalOkButton}"></button>
            </div>
        </div>

    </div>
</div>

<!-- Modal with information message -->
<div class="modal fade" id="successfullyRetrievePasswordModal" role="dialog">
    <div class="modal-dialog modal-md">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-body">
                <h2><span class="glyphicon glyphicon-ok-sign"></span></h2>
                <p th:text="#{changePassword.changePasswordSuccessfully}"></p>
            </div>
            <div class="modal-footer-custom">
                <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="goToIndex()" th:text="#{modalOkButton}"></button>
            </div>
        </div>

    </div>
</div>


</body>
</html>